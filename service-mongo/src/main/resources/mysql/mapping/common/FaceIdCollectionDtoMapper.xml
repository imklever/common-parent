<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.isoftstone.common.mongobackup.mapper.FaceIdCollectionDtoMapper" >
  <resultMap id="BaseResultMap" type="com.isoftstone.common.jd.FaceIdCollectionDto" >
    <id column="id" property="id" jdbcType="VARCHAR" />
    <result column="face_id" property="faceId" jdbcType="VARCHAR" />
    <result column="gender" property="gender" jdbcType="VARCHAR" />
    <result column="age" property="age" jdbcType="VARCHAR" />
    <result column="device" property="device" jdbcType="VARCHAR" />
    <result column="capture_time" property="captureTime" jdbcType="DECIMAL" />
    <result column="image" property="image" jdbcType="VARCHAR" />
    <result column="feature" property="feature" jdbcType="VARCHAR" />
    <result column="appeared_num" property="appearedNum" jdbcType="INTEGER" />
    <result column="device_type" property="deviceType" jdbcType="INTEGER" />
    <result column="unit_id" property="unitId" jdbcType="VARCHAR" />
    <result column="capture_timestamp" property="captureTimestamp" jdbcType="VARCHAR"/>
  </resultMap>

  <sql id="Base_Column_List" >
    id, face_id, gender, age, device, capture_time, image, feature, appeared_num,device_type,unit_id,capture_timestamp
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String" >
    select 
    <include refid="Base_Column_List" />
    from jd_face_id_collection
    where id = #{id,jdbcType=VARCHAR}
  </select>
   <select id="selectOne" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from jd_face_id_collection ORDER BY capture_time LIMIT 1
  </select>
  <select id="selectByTime" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from jd_face_id_collection 
    where capture_time <![CDATA[ <= ]]> #{endTime,jdbcType=VARCHAR} and capture_time <![CDATA[ >= ]]> #{startTime,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String" >
    delete from jd_face_id_collection
    where id = #{id,jdbcType=VARCHAR}
  </delete>
  <delete id="deleteAll">
    delete from jd_face_id_collection
  </delete>
  <insert id="insert" parameterType="com.isoftstone.common.jd.FaceIdCollectionDto" >
    insert into jd_face_id_collection (id, face_id, gender, 
      age, device, capture_time, 
      image, feature, appeared_num,unit_id,capture_timestamp
      )
    values (#{id,jdbcType=VARCHAR}, #{faceId,jdbcType=VARCHAR}, #{gender,jdbcType=VARCHAR}, 
      #{age,jdbcType=VARCHAR}, #{device,jdbcType=VARCHAR}, #{captureTime,jdbcType=DECIMAL}, 
      #{image,jdbcType=VARCHAR}, #{feature,jdbcType=VARCHAR}, #{appearedNum,jdbcType=INTEGER},
      #{unitId,jdbcType=VARCHAR},#{captureTimestamp,jdbcType=VARCHAR}
      )
  </insert>
  <insert id="insertBatch">
    insert into jd_face_id_collection (id, face_id, gender, 
      age, device, capture_time, 
      image, feature, appeared_num,device_type,unit_id,capture_timestamp
      ) values
     <foreach collection ="list" item="dto" separator =",">
     (#{dto.id,jdbcType=VARCHAR}, #{dto.faceId,jdbcType=VARCHAR}, #{dto.gender,jdbcType=VARCHAR}, 
      #{dto.age,jdbcType=VARCHAR}, #{dto.device,jdbcType=VARCHAR}, #{dto.captureTime,jdbcType=DECIMAL}, 
      #{dto.image,jdbcType=VARCHAR}, #{dto.feature,jdbcType=VARCHAR}, #{dto.appearedNum,jdbcType=INTEGER},
       #{dto.deviceType,jdbcType=INTEGER}, #{dto.unitId,jdbcType=VARCHAR},#{dto.captureTimestamp,jdbcType=VARCHAR}
      )
    </foreach > 
  </insert>
</mapper>